{
  "OBJECTIVE": "Wagstaff Lab v3.0 架构重构：core/apps 分层与 WebCraft 服务化",
  "MANAGEMENT_DOC": "docs/management/PROJECT_MANAGEMENT.md",
  "TASKS_TODO": [
    "Catalog stats 解析继续扩展：优先补齐 equippable/rechargeable/heater 等仍有缺口的组件字段，并提升动态/条件赋值的覆盖率。",
    "i18n 覆盖率提升：扩充 names/desc/quotes 索引并完善 UI 词条。",
    "CatalogV2 索引与质量报告持续迭代：对比覆盖率与新增字段。"
  ],
  "TASKS_DONE": [
    "重构 Wiki 和 Explorer 使用 Engine",
    "实现情报扫描结果保存到 data/reports/",
    "创建 apps/cli/commands/dash.py 项目概况面板",
    "文档化：在 README.md 中记录新工具接入 SOP",
    "重构工具注册逻辑：引入 apps/cli/registry.py 实现单一数据源",
    "Hotfix(pm): 修复 STATUS_FILE 路径依赖并实现原子化写入 (.tmp -> rename)",
    "Wiki v2.3: 实现交互式搜索 (find) 与详细组件展示",
    "Analyzer: 支持内联掉落表解析 (Krampus) 与 Tuning 递归数值追踪",
    "PM Tool: 修复 JSON 数据结构并实现自动迁移 (v1->v2)",
    "WebCraft: Catalog UI 修复 i18n helper 缺失导致的空白与标签切换异常",
    "Refactor: core/apps 拆分，CLI 与 WebCraft 应用层分离",
    "CatalogV2: WebCraft 后端切换到 v2 items 索引，提供更完整的 item 元信息。",
    "CatalogV2: Catalog UI 支持 v2 元信息检索与详情展示。",
    "WebCraft: tuning trace API 与 UI 按需加载实现。",
    "CatalogV2: item stats 提取（weapon/armor/uses 等）并在 UI 展示。",
    "CLI: commands 子目录与 main dispatcher 重构完成。",
    "Tooling: 引入 pyproject.toml 与 Makefile 统一依赖与任务入口。",
    "Tooling: 移除 bin/ 包装器与 installer，CLI 仅通过 pyproject 入口提供。",
    "Server: 将 tempforcodex 服务器管理脚本重构为 wagstaff server 子命令。",
    "Mgmt: 退役 pm 工具，统一使用 PROJECT_MANAGEMENT + PROJECT_STATUS。",
    "Stats 缺口定位：清点 equippable/rechargeable/heater 缺失样本并抽查 prefab 动态/条件赋值。",
    "Stats 解析补齐：按 low_coverage_keys 优先补 recharge_max/recharge_time 与 carried_heat/heat_radius 的解析路径。",
    "Storage: 导出 SQLite catalog 并在 WebCraft 优先加载 SQLite、缺失时回退 JSON。",
    "WebCraft: catalog 分页 + 缓存头，UI 分页加载与搜索改造。",
    "WebCraft: tuning trace 前缀索引优化，i18n 切换为 index-only。",
    "WebCraft: 重构 Craft/Cooking/Catalog 前端布局与交互，统一页面结构与移动端体验。",
    "WebCraft: Craft/Cooking/Catalog 搜索改为后端 i18n index 驱动，移除前端中文回退逻辑。",
    "Icons: 修复 KTEX 图标方向翻转并同步 build_icons 导出流程。",
    "Tooling: 修复 build_icons 导入异常导致的 CLI 启动失败。",
    "CatalogV2: 新增 cooking_ingredients 解析与落盘（ingredients.lua/cooking.lua）。",
    "WebCraft: Cooking 探索/模拟重做，支持接近可做与排序公式说明。",
    "Farming: 新增耕种机制索引与报告（farming defs）"
  ],
  "RECENT_LOGS": [
    "[2026-01-12 16:03] 优化工具链：实现环境自动注册与统一入口",
    "[2026-01-12 16:12] 建立 Wagstaff-Lab 新工具接入标准流程 (SOP)",
    "[2026-01-12 16:28] 完成说明书逻辑集成：Registry 补全 usage 字段并同步至 Guide UI",
    "[2026-01-12 18:32] 架构验收：apps/cli/registry.py 单一数据源功能确认正常",
    "[2026-01-13 14:53] Release v2.3: 完成 Wagstaff Lab 交互式升级。Wiki 新增 TUI 翻页模式，Analyzer 具备深度语义理解能力，工具链 (pm.py) 升级为健壮版本。",
    "[2026-01-15 12:50] WebCraft: 修复中文切换灰态问题，补全 meta.i18n 初始化与预加载。",
    "[2026-01-15 12:50] WebCraft: 修复 icon/id 对应问题，添加图标别名回退并允许 static 模式 API fallback。",
    "[2026-01-15 13:54] WebCraft: 修复 icon 静态路径未挂载 root_path 导致错误图标的问题。",
    "[2026-01-15 14:01] build_icons: 优先使用本地 inventoryimages.xml，避免与松散 tex 版本不匹配导致图标错位。",
    "[2026-01-15 14:27] build_icons/icon_service: 修正 v 坐标翻转默认逻辑，避免图标上下错位导致错配。",
    "[2026-01-15 14:40] Tuning: 支持解析 Tune() 函数内的 TUNING 表，输出完整链路与数值。",
    "[2026-01-15 16:13] WebCraft: Catalog UI 补全 i18n helper，修复 applyLabelModeUI 未定义导致的页面空白。",
    "[2026-01-15 16:13] Repo: 归档 patch 残留与 *.orig/*.rej 临时文件。",
    "[2026-01-15 16:13] Refactor: 拆分 core/apps 目录，WebCraft 迁移到 apps/webcraft。",
    "[2026-01-15 16:13] Cleanup: 移除旧快照与 snaptxt 遗留，收敛历史包袱。",
    "[2026-01-15 17:21] Snapshot: 优化 LLM 快照输出与 sections/focus 规范，同步更新开发规范。",
    "[2026-01-15 17:26] DevGuide: 增加 snapshot 友好开发规范，指导后续代码结构与文档习惯。",
    "[2026-01-15 18:13] RawScan: 完成 DST 原始数据扫描与覆盖率报告。",
    "[2026-01-15 19:06] ResourceIndex: 生成 scripts+data 的资源索引，覆盖 prefab/组件/资源清单。",
    "[2026-01-15 19:10] CatalogV2: 添加 v2 规范草案与 tag overrides 示例。",
    "[2026-01-15 20:12] CatalogV2: build_icons 默认切换到 v2 产物并识别 items 作为 id 集。",
    "[2026-01-15 20:14] WebCraft: 后端 CatalogStore 与 API 接入 v2 items/index 结构。",
    "[2026-01-15 20:18] WebCraft UI: Catalog 搜索支持 kind/category/source/tag/component/slot 过滤，并展示 v2 元信息。",
    "[2026-01-15 20:20] Docs: README/DEV_GUIDE/WEBCRAFT_NETWORK_STACK 同步 v2 路径与说明。",
    "[2026-01-15 20:36] WebCraft: tuning trace 索引 API 与 UI 按需加载接入。",
    "[2026-01-15 20:54] CatalogV2: prefab 组件方法/属性抽取 stats，并在 Catalog UI 展示与 trace 按需加载。",
    "[2026-01-16 10:22] CatalogV2: 扩展 equippable/rechargeable/heater stats 解析，修正 cooking trace 统计并重建索引/质量报告。",
    "[2026-01-16 10:22] Quality: 新增 quality_gate 自检工具并补入 DEV_GUIDE 清单。",
    "[2026-01-16 10:54] Quality: 调整 quality_gate 为默认信息提示（CI 可用 --enforce/--strict）。",
    "[2026-01-16 10:56] Tooling: 注册 catalog_index/catalog_quality/quality_gate 到 CLI registry。",
    "[2026-01-16 11:10] CLI: 重构 Dashboard/Doctor，统一 CLI 工具路径与注册。",
    "[2026-01-16 11:51] CLI: 引入 commands/ 结构与统一 main dispatcher，补充 CLI 规划与 Makefile/pyproject 基建。",
    "[2026-01-16 12:20] Tooling: 清理 bin/ 与 installer，统一使用 pyproject 入口 wagstaff。",
    "[2026-01-16 13:45] Server: 新增 wagstaff server 子命令，接入 DST 服务器管理流程。",
    "[2026-01-16 13:50] Server: 独立 apps/server 模块，与数据分析层解耦。",
    "[2026-01-16 14:05] Mgmt: 建立 docs/management/PROJECT_MANAGEMENT.md 作为执行层单一入口。",
    "[2026-01-16 14:12] Mgmt: 移除 pm 工具入口，管理统一收敛到文档与状态文件。",
    "[2026-01-16 14:20] Mgmt: 新增 wagstaff mgmt 用于状态展示与同步。",
    "[2026-01-16 14:26] Catalog: 移除 v1 索引链路，抽离 shared helpers，WebCraft 仅接受 v2 catalog。",
    "[2026-01-16 14:35] Mgmt: 增加 DEV_GUIDE 强提醒与 mgmt check 校验。",
    "[2026-01-16 14:35] Server: 新增 wagstaff server ui 交互菜单。",
    "[2026-01-16 14:36] Docs: 规范文档目录，按 guides/management/specs/architecture 归档。",
    "[2026-01-16 14:48] Cleanup: 清理低价值 reports 与 samples 产物。",
    "[2026-01-16 14:57] CatalogV2: 扩展 equippable/rechargeable/heater stats 解析并增强条件/别名赋值覆盖。",
    "[2026-01-16 14:57] Server: 对齐旧 dst_tool.sh 交互结构，补齐控制台指令菜单。",
    "[2026-01-16 15:38] CatalogV2: 补齐 rechargeable/heater 组件字段映射并优化跨文件/多行赋值解析覆盖。",
    "[2026-01-16 15:52] Server: 优化 server UI，增加运行环境检查、日志/备份摘要与交互前置校验。",
    "[2026-01-16 16:01] Server: UI 视觉对齐旧脚本（双列菜单、Emoji/配色），新增中英切换与宽字符对齐。",
    "[2026-01-16 16:07] Server: UI 美学增强，头部信息对齐与双列菜单分隔线优化。",
    "[2026-01-16 16:21] Server: UI 模块化布局（状态/路径/菜单分区），收敛配色并引入状态 Pills 高亮。",
    "[2026-01-16 16:30] Mgmt: 调整 CatalogV2 质量迭代任务描述，移除“定期重建”。",
    "[2026-01-16 16:33] Quality: catalog_quality 报告新增 stats 缺口定位（按组件缺失条目样本）。",
    "[2026-01-16 16:42] Stats: 生成 equippable/rechargeable/heater 缺口抽查报告 stats_gap_inspect。",
    "[2026-01-16 17:02] Stats: 扩展 AddComponent 别名解析与 heater/rechargeable 赋值路径，更新 catalog v2 与质量报告。",
    "[2026-01-16 17:19] Storage: 新增 catalog SQLite 导出并支持 WebCraft SQLite 优先加载。",
    "[2026-01-16 17:57] WebCraft: SQLite 正式化、catalog 分页/缓存、tuning trace 前缀索引与 i18n index-only。",
    "[2026-01-16 18:26] WebCraft: 前端界面现代化重构，增强移动端适配与视觉层级。",
    "[2026-01-16 19:33] Server: UI 布局与交互深度重构，统一主界面/控制台/恢复屏幕框架并优化视觉占比。",
    "[2026-01-17 08:52] WebCraft: Craft/Cooking/Catalog 前端重构，统一多页面结构与移动端交互。",
    "[2026-01-17 08:53] WebCraft: 搜索统一迁移后端，CJK 场景接入 i18n index。",
    "[2026-01-17 08:54] Icons: 修复 KTEX 图标方向翻转并同步导出逻辑。",
    "[2026-01-17 08:55] Tooling: 修复 build_icons 导入异常导致的启动失败。",
    "[2026-01-17 09:20] Mgmt: 归档 Cooking 探索/模拟方案并立项 ingredient tags 解析。",
    "[2026-01-17 09:42] Docs: 归档 Cooking 升级方案到 docs/management/COOKING_UPGRADE.md。",
    "[2026-01-17 10:25] CatalogV2: 落盘 cooking_ingredients 索引并扩展 SQLite schema。",
    "[2026-01-17 10:25] WebCraft: Cooking Explore/Simulate 接入规则评估与接近可做列表。",
    "[2026-01-17 10:46] Docs: DEV_GUIDE 增加 UI 设计与 Git 流程规范。",
    "[2026-01-17 10:46] WebCraft: Cooking UI 以 skill 方式重塑布局与结果呈现。",
    "[2026-01-17 11:47] WebCraft: 修复 Craft/Cooking 模板错位与 setView 缺失，恢复料理模式切换与配色。",
    "[2026-01-17 12:29] WebCraft: Cooking 探索/模拟新增食材选择面板与分组筛选。",
    "[2026-01-17 14:10] Repo: 收敛仓库体积，data/index 与 data/static/icons 产物改为忽略并移出版本控制。",
    "[2026-01-17 14:44] WebCraft: Cooking 探索改为食材池推断，新增锅位预览与食材标签回退解析。",
    "[2026-01-17 15:00] WebCraft: Cooking 规则约束去冗余与食材池过滤，修复肉丸模拟与怪物食材展示。",
    "[2026-01-17 15:06] WebCraft: Cooking 增加 meatystew→bonestew 别名解析与搜索兼容。",
    "[2026-01-17 15:30] WebCraft: 移除 cooking 别名映射，仅保留 bonestew 原始名称。",
    "[2026-01-17 15:43] CatalogV2: CookingIngredientAnalyzer 支持 AddIngredientValues 解析并生成 cooking_ingredients 索引。",
    "[2026-01-17 15:52] WebCraft: Cooking 详情区改为主从双列布局，探索/模拟区工具侧栏固定可见。",
    "[2026-01-17 15:58] WebCraft: Cooking 食材选择区提升权重与密度，探索/模拟改为多列栅格。",
    "[2026-01-17 16:05] DevGuide: 补充 Git 收尾流程要求。",
    "[2026-01-17 16:18] WebCraft: Cooking 探索/模拟收敛 slot 文本输入权重，改为手动输入折叠并提升食材选择区密度。",
    "[2026-01-17 16:34] WebCraft: Cooking 预测体验优化，Near miss 分级并压低填充物类推荐权重。",
    "[2026-01-17 16:47] CatalogV2: 补齐 oceanfish *_inv 入锅食材解析，料理食材列表实现全覆盖。",
    "[2026-01-17 17:02] WebCraft: Cooking 探索/模拟收紧 slot 与食材选择区间距，强调中部交互焦点。",
    "[2026-01-17 17:05] WebCraft: Cooking 规则约束支持 names OR 分组，修复 dragonpie 类探索/模拟缺失提示。",
    "[2026-01-17 17:06] WebCraft: Cooking Near miss 分档改为优先特征菜谱，填充物需求不再降级。",
    "[2026-01-17 17:08] WebCraft: 补齐 UI i18n 缺失词条，新增 OR 组提示模板并收敛 i18n/ID 流程到 DEV_GUIDE。",
    "[2026-01-17 18:18] WebCraft: Cooking tags 接入 i18n（含 source 标记），卡片新增食谱属性，缺失条件展示与 p/w/s 权重显示优化。",
    "[2026-01-17 18:36] WebCraft: ID 模式下 tag 展示附带 tags_meta source 标识，标签分组展示统一走 label。",
    "[2026-01-17 18:44] WebCraft: Cooking 头部紧凑化，调换食材选择/锅位位置并补齐 ensureI18nTags。",
    "[2026-01-17 18:52] WebCraft: 修复 cooking 脚本缺失 ensureI18nTags 导致的食材面板失效。",
    "[2026-01-17 19:05] WebCraft: 进一步收窄全站表头，Cooking 锅位与食材区复位并压缩手动输入占位，紧凑模式切换与结果列表底部遮挡修复。",
    "[2026-01-17 19:18] WebCraft: ID 模式 tag 来源改为弱提示样式，Cooking 模式切换与锅位输入进一步压缩。",
    "[2026-01-17 19:28] WebCraft: Cooking label mode 增加 ensureI18nTags 容错，避免食材面板因函数缺失报错。",
    "[2026-01-17 20:10] WebCraft: Cooking 规则解析补齐 names OR 组合计数约束，修复 mashedpotatoes 误判双材料问题。",
    "[2026-01-17 20:38] Docs/WebCraft: DEV_GUIDE 增加 UI 模块化规范，新增模块化计划文档并完成静态资源脚手架。",
    "[2026-01-17 21:10] WebCraft UI: 完成模板/静态资源拆分，ui.py 仅保留模板渲染并接入静态资源分层。",
    "[2026-01-17 21:24] WebCraft: Cooking 图鉴与工具页拆分，统一搜索入口并弱化工具切换按钮。",
    "[2026-01-17 23:09] WebCraft: 主页切换到 Cooking 模拟并新增图鉴跳转入口，补齐 /craft 路由。",
    "[2026-01-17 23:18] WebCraft: Cooking 模拟工具页移动端布局重构，加入结果自动聚焦与粘性锅位条。",
    "[2026-01-17 23:36] Docs/WebCraft: 制定移动端 App Shell 规划并为 Cooking 落地底部导航与移动端布局基线。",
    "[2026-01-18 01:28] WebCraft: Cooking 工具页移动端重设计，新增底部结果抽屉与锅位计数，强化实用工具体验。",
    "[2026-01-18 20:17] WebCraft: 立项 Cooking Tools Atlas Ledger 桌面/移动端重构 (docs/management/WEBCRAFT_ATLAS_LEDGER_UI_REFACTOR.md)。",
    "[2026-01-19 01:14] WebCraft UI: Cooking Atlas Ledger 工具页区分桌面/移动端视觉策略，移动端工具化、桌面保留丰富信息，slot/食材卡片布局同步优化。",
    "[2026-01-19 01:29] WebCraft UI: 清理 Cooking 工具页 lab 测试资产与旧工具栏/抽屉逻辑，收敛 CSS/JS 并移除相关 i18n 项。",
    "[2026-01-19 12:32] WebCraft: Cooking 模拟优化版本归档。",
    "[2026-01-19 21:08] Tooling: build_resource_index/build_icons/build_catalog_v2 支持增量缓存与 icon trace 扫描。",
    "[2026-01-19 22:14] WebCraft: 图标 alias 补齐 onion/tomato 映射，SQLite 构建支持增量缓存。",
    "[2026-01-19 23:41] WebCraft: Cooking 食材列表标记虚拟食材，桌面可切换显示虚拟栏，虚拟食材禁用 PNG 图标请求。",
    "[2026-01-19 23:54] WebCraft: onion/tomato 别名食材使用动态图标生成并避免静态 404 请求。",
    "[2026-01-20 00:12] WebCraft: 修复 cooking 规则中 names.* 求和表达式解析，避免藤壶中细面等误判需要生熟共存。",
    "[2026-01-20 00:28] Core: cooking rule 解析补齐 names 求和约束，Cooking 模拟移除运行时 names_sum 兜底逻辑以收敛流程。",
    "[2026-01-20 00:41] WebCraft UI: Cooking 结果卡缺失提示改为分色 chip，区分缺物品/缺标签，增强可读性。",
    "[2026-01-20 01:02] WebCraft UI: Cooking 结果卡改为条件清单展示，满足条件高亮绿色。",
    "[2026-01-20 01:43] WebCraft UI: Cooking 工具页移除探索切换与专用交互，保留模拟并自动走探索逻辑，收敛展示与文案。",
    "[2026-01-20 01:52] WebCraft UI: Cooking 工具页默认加载自动展示未筛选结果，移除探索提示文案。",
    "[2026-01-20 02:03] WebCraft: Cooking 标签推断移除 ice 的 inedible 提示，匹配游戏 cooking.lua 标签。",
    "[2026-01-20 02:08] WebCraft: Cooking 模拟仅在无官方 tags 时启用猜测标签，避免覆盖游戏食材数据。",
    "[2026-01-20 02:24] WebCraft UI: Cooking 模拟条件 chip 增加半满足状态，优化结果卡条件展示节奏。",
    "[2026-01-20 02:36] WebCraft UI: Cooking 条件 chip 统一未满足颜色并用槽位计数修正半满足判定。",
    "[2026-01-20 02:49] WebCraft UI: Cooking 条件 chip 仅基于当前槽位估算 name/tag，增强半满足对比度。",
    "[2026-01-20 03:02] WebCraft UI: Cooking 半满足视觉弱化并整理槽位条件计算链路。",
    "[2026-01-20 03:18] WebCraft UI: Cooking 结果区增加检索栏并优化卡片层级顺序。",
    "[2026-01-20 03:34] WebCraft UI: Cooking 食材卡展示 tag 数值并调整移动端信息层级。",
    "[2026-01-20 11:09] 新增耕种机制索引产物与机制报告 (farming defs)",
    "[2026-01-20 13:54] make all 加入 farming-defs",
    "[2026-01-20 14:21] Docs: 归档完成规划文档并新增 vNext 重构规划",
    "[2026-01-20 14:52] Core: 拆分 analyzer 为 lua/parsers 模块并移除 legacy analyzer",
    "[2026-01-20 15:00] Core: 新增 component 解析与 mechanism index 构建入口",
    "[2026-01-20 15:08] Tooling: snapshot 预设移除 analyzer 路径并指向 parsers"
  ],
  "DEV_MANIFESTO": [
    "分层清晰：core 负责解析与索引，apps 负责交互与服务，devtools 提供流程工具",
    "单向依赖：apps/devtools 可以依赖 core，core 不依赖上层",
    "数据契约：对外数据统一落盘 data/，版本化命名并携带元信息",
    "路径自适应：禁止硬编码绝对路径，统一通过 __file__ 推导",
    "可追溯与可复用：产物记录来源 hash，核心能力被 CLI/Web 共享",
    "稳健降级：优先 scripts.zip，缺失时降级 scripts/ 目录",
    "LLM 快照规范：snapshot.py 作为统一导出入口，模板与 sections 控制噪声"
  ]
}
